import{bY as N,L as K,a as V,c6 as $,C as O,bu as z,eu as Y,v,G as k,K as q,aC as l,o as s,h as i,n as r,z as u,F as C,aF as B,j as A,i as o,t as p,bs as G,l as _,B as b,er as H,q as L}from"./index.664a474d.js";import{S as J}from"./index.c1587db6.js";import{T as R}from"./index.b0f07b01.js";import{T as P}from"./index.3caad43f.js";import{u as Q}from"./index.209da8c9.js";import{B as W,u as X}from"./useTable.70b93a4d.js";import"./useForm.7fc630ea.js";import{B as Z,u as ee}from"./index.36e68cfb.js";import"./index.0292cd41.js";import"./useFlexGapSupport.df27bd5a.js";import"./eagerComputed.621973b2.js";import"./useRefs.412cac75.js";import"./createMock.0103715c.js";import"./moment.9709ab41.js";import"./random.0da295ae.js";import"./_isIterateeCall.8bce29ba.js";import"./toFinite.1248a2a6.js";import"./index.40536381.js";import"./fromPairs.84aabb58.js";import"./CaretUpOutlined.1c0e3f9a.js";import"./scrollTo.7a7c91b6.js";import"./index.6937b675.js";import"./index.1c4a8ceb.js";import"./index.0436ce61.js";import"./useSize.1f5d6df9.js";import"./useWindowSizeFn.bea509a5.js";import"./useContentViewHeight.1b426da7.js";import"./ArrowLeftOutlined.12cccf8f.js";import"./transButton.f70a9e9c.js";import"./index.9ee509e0.js";import"./index.ebefa23c.js";import"./index.cae2eb44.js";import"./index.3d8a1ebe.js";import"./_baseEach.64f46ed2.js";import"./get.967689fd.js";import"./index.a5e5f89e.js";import"./sortable.esm.2632adaa.js";import"./uniqBy.9b39aa9f.js";import"./_baseIteratee.423afaf7.js";import"./FullscreenOutlined.6c9757eb.js";import"./index.da7bc1f8.js";import"./index.63ef064e.js";import"./index.803c90ab.js";import"./index.c92ded65.js";import"./index.a86aefa2.js";import"./download.0d7d171c.js";import"./index.a756d63b.js";import"./index.ef04c0fc.js";const te=e=>[{title:"\u59D4\u6258\u5355\u53F7",dataIndex:"trustNo"},{title:"\u8239\u540D/\u822A\u6B21",dataIndex:"vessel",width:230},{title:"\u7BB1\u53F7",dataIndex:"ctnNo"},{title:"\u6BCD\u8239\u622A\u5173\u65F6\u95F4",dataIndex:"parentTime",customRender:({text:t,record:a})=>N("span",{class:a.warningFlag?"text-warning":""},t)},{title:"\u8FD0\u8F93\u7C7B\u578B",dataIndex:"transportType"},{title:e===2?"\u5185\u6CB3\u6E2F":"\u53D1\u7AD9",dataIndex:"start"},{title:e===2?"\u5185\u6CB3\u822A\u6B21":"\u5230\u7AD9",dataIndex:"end"},{title:e===2?"\u652F\u7EBF\u6E2F":"\u8F66\u6B21",dataIndex:"trainNumber"},{title:e===2?"\u652F\u7EBF\u822A\u6B21":"\u8F66\u76AE",dataIndex:"wagon"},{title:"\u7BB1\u578B\u5C3A\u5BF8",dataIndex:"ctnSizeTye"},{title:"\u9884\u4F30\u8D39\u7528",dataIndex:"price"},{title:"\u63D0\u4EA4\u72B6\u6001",dataIndex:"postStatusText"},{title:"\u53D7\u7406\u72B6\u6001",dataIndex:"acceptStatusText"},{title:"\u6700\u65B0\u72B6\u6001",dataIndex:"statusText",slots:{customRender:"statusText"}},{title:"\u4E0B\u5355\u65F6\u95F4",dataIndex:"createTime"},{title:"\u53E3\u5CB8\u96C6\u7ED3\u65F6\u95F4",dataIndex:"createTime2"}],M=e=>{const t={1:"/resource/img/anji-n.png",2:"/resource/img/jx-n.png"},a={1:"/resource/img/anji-n3.png",2:"/resource/img/jx-n3.png"};return{0:[{ctnNo:"NYKU47771197",img:e.multiTypeCode===2?"/resource/img/hh.png":t[e.loadPortId]||new URL("/assets/n0.c8daca94.png",self.location),imgExcept:e.multiTypeCode===2?"/resource/img/jx-n3.png":a[e.loadPortId]||new URL("/assets/n3.4420933b.png",self.location)},{ctnNo:"OOLU8742145",img:e.multiTypeCode===2?"/resource/img/hh.png":t[e.loadPortId]||new URL("/assets/n0.c8daca94.png",self.location),imgExcept:e.multiTypeCode===2?"/resource/img/jx-n3.png":a[e.loadPortId]||new URL("/assets/n3.4420933b.png",self.location)},{ctnNo:"OOLU5640912",img:e.multiTypeCode===2?"/resource/img/hh.png":t[e.loadPortId]||new URL("/assets/n0.c8daca94.png",self.location),imgExcept:e.multiTypeCode===2?"/resource/img/jx-n3.png":a[e.loadPortId]||new URL("/assets/n3.4420933b.png",self.location)},{ctnNo:"CMAU1298602",img:e.multiTypeCode===2?"/resource/img/hh.png":t[e.loadPortId]||new URL("/assets/n0.c8daca94.png",self.location),imgExcept:e.multiTypeCode===2?"/resource/img/jx-n3.png":a[e.loadPortId]||new URL("/assets/n3.4420933b.png",self.location)}],1:[{ctnNo:"OOLU87981245",img:e.multiTypeCode===2?"/resource/img/hh.png":t[e.loadPortId]||new URL("/assets/n0.c8daca94.png",self.location),imgExcept:e.multiTypeCode===2?"/resource/img/jx-n3.png":a[e.loadPortId]||new URL("/assets/n3.4420933b.png",self.location)}]}};const oe=V({name:"MultiLink",components:{Spin:$,Tabs:P,TabPane:P.TabPane,BasicModal:Z,Button:O,Space:J,BasicTable:W,Timeline:R,TimelineItem:R.Item,Popover:z},setup(){const e=Q(),{detail:t}=Y(e),a=v(0),m=v(k(M(t.value))),F=v(m.value[0]),h=v(!1),[f,{openModal:y}]=ee(),[D]=X({dataSource:t.value.trusts,title:"\u59D4\u6258\u4FE1\u606F",columns:te(t.value.multiTypeCode),showIndexColumn:!1,canResize:!0,useSearchForm:!1,showTableSetting:!1,bordered:!0,size:"small",rowKey:"id",clickToRowSelect:!0,pagination:!1}),x=d=>{};return q(a,d=>{F.value=m.value[d]}),{handleModalVisible:d=>{d||(m.value=k(M(t.value.multiTypeCode)))},handleDo:(d,n)=>{h.value=!0,setTimeout(()=>{h.value=!1;const c=F.value.splice(d,1),g={1:"/resource/img/anji-n0.png",2:"/resource/img/jx-n0.png"},U={1:"/resource/img/anji-n3.png",2:"/resource/img/jx-n3.png"},S=c.map(j=>({...j,imgExcept:U[t.value.loadPortId]||new URL("/assets/n1.85aeb168.png",self.location),img:g[t.value.loadPortId]||new URL("/assets/n1.85aeb168.png",self.location),info:n===0?"\u5DF2\u7ECF\u8F6C\u516C\u8DEF\u8FD0\u8F93":"\u5DF2\u7ECF\u6574\u7968\u5F85\u5904\u7406"}));m.value[0].unshift(S[0]),a.value=0,e.updateTrust(),H.success(n===0?"\u5DF2\u7ECF\u8F6C\u516C\u8DEF\u8FD0\u8F93":"\u5DF2\u7ECF\u6574\u7968\u5F85\u5904\u7406",1,()=>{y(!1)})},1e3)},detail:t,activeKey:a,_mData:m,currentData:F,tabs:[{tab:"\u6B63\u5E38",key:0},{tab:"\u5F02\u5E38",key:1}],registerModal:f,handleMonitor:()=>{y(!0)},timelines:[[{content:"\u7A7F\u5C71\u7AD9",time:"2022/10/18"},{content:"\u6D2A\u5858\u7AD9",time:"2022/10/17"},{content:"\u7ECD\u5174\u7AD9",time:"2022/10/17"},{content:"\u676D\u5DDE\u7AD9",time:"2022/10/16"},{content:{1:"\u5B89\u5409\u7AD9",2:"\u5609\u5174\u7AD9",3:"\u957F\u5174\u5357\u7AD9"}[t.value.loadPortId],time:"2022/10/16"}],[{content:"\u5E72\u7EBF\u5378\u8239",time:"2022/10/18"},{content:"\u652F\u7EBF\u88C5\u8239",time:"2022/10/17"},{content:"\u652F\u7EBF\u5378\u8239",time:"2022/10/16"},{content:"\u5185\u6CB3\u88C5\u8239",time:"2022/10/16"}]],handleApp:x,registerTable:D,doing:h}}}),ne=b("\u591A\u8054\u5728\u9014\u76D1\u6D4B"),ue=o("div",{class:"pb12"},"\u72B6\u6001\u65F6\u95F4:",-1),ae={class:"text-gray"},se={class:"node-table"},ie={class:"node-table-header flex"},le=o("div",{class:L("node-table-cell flex-none font-bold w150 p8")},"\u7BB1\u53F7",-1),re=o("div",{class:"node-table-cell flex-1 font-bold p8"},"\u76D1\u6D4B\u4FE1\u606F",-1),de={key:0,class:"node-table-cell flex-none w120 font-bold p8"},ce={class:"node-table-body",style:{overflow:"hidden auto","max-height":"400px"}},pe={class:"node-table-row flex"},me={class:L("node-table-cell w150 flex-none p12")},ge={key:0,class:"text-warning"},be={key:0,class:"node-table-cell flex-1 p12"},fe=["src"],_e={key:1,class:"node-table-cell flex-1 p12"},Fe=["src"],he={key:2,class:"node-table-cell flex-none w120 p12"},ye={style:{"text-align":"left"}},ve={style:{color:"#ff1010"}},Ce=o("br",null,null,-1),De=b("\u5EFA\u8BAE\u8F6C\u516C\u8DEF\u8FD0\u8F93"),xe=b("\u8F6C\u516C\u8DEF"),Be=b("\u6574\u7968\u5F85\u5904\u7406");function Te(e,t,a,m,F,h){const f=l("Button"),y=l("TimelineItem"),D=l("Timeline"),x=l("Popover"),T=l("BasicTable"),E=l("TabPane"),w=l("Tabs"),I=l("Spin"),d=l("BasicModal");return s(),i(C,null,[r(T,{onRegister:e.registerTable,class:"link-table"},{toolbar:u(()=>[r(f,{type:"primary",onClick:e.handleMonitor},{default:u(()=>[ne]),_:1},8,["onClick"])]),statusText:u(({record:n,text:c})=>[r(x,{placement:"rightBottom"},{content:u(()=>[ue,r(D,null,{default:u(()=>[(s(!0),i(C,null,B(e.timelines[n.multiTypeCode===2?1:0],g=>(s(),A(y,null,{default:u(()=>[o("div",null,p(g.content),1),o("div",ae,p(g.time),1)]),_:2},1024))),256))]),_:2},1024)]),default:u(()=>[o("a",null,p(c),1)]),_:2},1024)]),_:1},8,["onRegister"]),r(d,{onRegister:e.registerModal,title:"\u591A\u8054\u76D1\u6D4B",width:"1100px","body-style":{padding:"12px"},onVisibleChange:e.handleModalVisible,footer:null,canFullscreen:!1,scrollable:!1},{default:u(()=>[r(w,{activeKey:e.activeKey,"onUpdate:activeKey":t[0]||(t[0]=n=>e.activeKey=n)},{default:u(()=>[(s(!0),i(C,null,B(e.tabs,(n,c)=>(s(),A(E,{key:n.key},{tab:u(()=>[o("span",{style:G({color:c===1?"#FF1010":"unset"})},p(`${n.tab}(${e._mData[n.key].length})`),5)]),_:2},1024))),128))]),_:1},8,["activeKey"]),o("div",se,[o("div",ie,[le,re,e.activeKey===1?(s(),i("div",de,"\u5904\u7406")):_("",!0)]),r(I,{spinning:e.doing,tip:"\u5904\u7406\u4E2D.."},{default:u(()=>[o("div",ce,[(s(!0),i(C,null,B(e.currentData,(n,c)=>(s(),i("div",pe,[o("div",me,[o("div",null,[b(p(n.ctnNo)+" ",1),n.info?(s(),i("div",ge,p(n.info),1)):_("",!0)])]),e.activeKey===0?(s(),i("div",be,[o("img",{src:n.img,style:{display:"block",width:"100%"}},null,8,fe)])):_("",!0),e.activeKey===1?(s(),i("div",_e,[o("img",{src:n.imgExcept,style:{display:"block",width:"100%"}},null,8,Fe)])):_("",!0),e.activeKey===1?(s(),i("div",he,[o("div",ye,[o("div",ve,[b(p(e.detail.multiTypeCode!==2?"\u94C1\u8DEF\u8F66\u76AE\u4E0D\u8DB3":""),1),Ce,De]),r(f,{type:"primary",onClick:g=>e.handleDo(c,0),class:"mb6"},{default:u(()=>[xe]),_:2},1032,["onClick"]),r(f,{type:"primary",onClick:g=>e.handleDo(c,1)},{default:u(()=>[Be]),_:2},1032,["onClick"])])])):_("",!0)]))),256))])]),_:1},8,["spinning"])])]),_:1},8,["onRegister","onVisibleChange"])],64)}var vt=K(oe,[["render",Te]]);export{vt as default};
