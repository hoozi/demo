import{w as B,ay as I,Y as m,f as g,as as z,Q as h,ap as F,k as d,az as k,v as p,aA as A,a as C,C as N,c as T,L as S,aB as D,aC as f,o as w,j as y,z as v,B as j,t as E,aD as b,b as O,aE as P,aF as R,aG as L,aH as V,aI as q,n as G,N as _}from"./index.664a474d.js";function H(t,n="value",a="change",o){const r=k()?.emit,e=B({value:t[n]}),s=I(e),u=l=>{e.value=l};return m(()=>{e.value=t[n]}),[g({get(){return e.value},set(l){z(l,s.value)||(e.value=l,h(()=>{r?.(a,l,...F(d(o))||[])}))}}),u,s]}function Q(t){const n=p(t),a=p(!1);let o;function i(){o&&window.clearInterval(o)}function r(){a.value=!1,i(),o=null}function e(){d(a)||!!o||(a.value=!0,o=setInterval(()=>{d(n)===1?(r(),n.value=t):n.value-=1},1e3))}function s(){n.value=t,r()}function u(){s(),e()}return A(()=>{s()}),{start:e,reset:s,restart:u,clear:i,stop:r,currentCount:n,isStart:a}}const U={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},Y=C({name:"CountButton",components:{Button:N},props:U,setup(t){const n=p(!1),{currentCount:a,isStart:o,start:i,reset:r}=Q(t.count),{t:e}=T(),s=g(()=>d(o)?e("component.countdown.sendText",[d(a)]):e("component.countdown.normalText"));m(()=>{t.value===void 0&&r()});async function u(){const{beforeStartFunc:c}=t;if(c&&D(c)){n.value=!0;try{await c()&&i()}finally{n.value=!1}}else i()}return{handleStart:u,currentCount:a,loading:n,getButtonText:s,isStart:o}}});function x(t,n,a,o,i,r){const e=f("Button");return w(),y(e,b(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:v(()=>[j(E(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}var $=S(Y,[["render",x]]);const J={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},K=C({name:"CountDownInput",components:{CountButton:$},inheritAttrs:!1,props:J,setup(t){const{prefixCls:n}=O("countdown-input"),[a]=H(t);return{prefixCls:n,state:a}}});function M(t,n,a,o,i,r){const e=f("CountButton"),s=f("a-input");return w(),y(s,b(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),P({addonAfter:v(()=>[G(e,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[R(Object.keys(t.$slots).filter(u=>u!=="addonAfter"),u=>({name:u,fn:v(c=>[L(t.$slots,u,V(q(c||{})))])}))]),1040,["class","size","value"])}var W=S(K,[["render",M]]);const Z=_(W);_($);export{Z as C,H as u};
