import{L as R,a as E,bc as P,aJ as w,v as A,bj as S,b as D,bI as N,aZ as x,c as L,Y as T,bl as V,bE as j,bh as q,fq as z,aC as g,o as d,h as C,n as O,z as B,j as I,l as G,t as M,B as H,q as J,H as Y}from"./index.664a474d.js";import{B as $}from"./index.1c4a8ceb.js";const Z=E({name:"LayoutBreadcrumb",components:{Icon:P,[$.name]:$},props:{theme:w.oneOf(["dark","light"])},setup(){const t=A([]),{currentRoute:l}=S(),{prefixCls:k}=D("layout-breadcrumb"),{getShowBreadCrumbIcon:y}=N(),m=x(),{t:v}=L();T(async()=>{if(l.value.name===V)return;const a=await j(),e=l.value.matched,r=e?.[e.length-1];let n=l.value.path;r&&r?.meta?.currentActiveMenu&&(n=r.meta.currentActiveMenu);const i=q(a,n),s=a.filter(_=>_.path===i[0]),o=u(s,i);if(!o||o.length===0)return;const p=b(o);l.value.meta?.currentActiveMenu&&p.push({...l.value,name:l.value.meta?.title||l.value.name}),t.value=p});function u(a,e){const r=[];return a.forEach(n=>{e.includes(n.path)&&r.push({...n,name:n.meta?.title||n.name}),n.children?.length&&r.push(...u(n.children,e))}),r}function b(a){return z(a,e=>{const{meta:r,name:n}=e;if(!r)return!!n;const{title:i,hideBreadcrumb:s,hideMenu:o}=r;return!(!i||s||o)}).filter(e=>!e.meta?.hideBreadcrumb)}function f(a,e,r){r?.preventDefault();const{children:n,redirect:i,meta:s}=a;if(n?.length&&!i){r?.stopPropagation();return}if(!s?.carryParam)if(i&&Y(i))m(i);else{let o="";e.length===1?o=e[0]:o=`${e.slice(1).pop()||""}`,o=/^\//.test(o)?o:`/${o}`,m(o)}}function c(a,e){return a.indexOf(e)!==a.length-1}function h(a){return a.icon||a.meta?.icon}return{routes:t,t:v,prefixCls:k,getIcon:h,getShowBreadCrumbIcon:y,handleClick:f,hasRedirect:c}}}),F={key:1};function K(t,l,k,y,m,v){const u=g("Icon"),b=g("router-link"),f=g("a-breadcrumb");return d(),C("div",{class:J([t.prefixCls,`${t.prefixCls}--${t.theme}`])},[O(f,{routes:t.routes},{itemRender:B(({route:c,routes:h,paths:a})=>[t.getShowBreadCrumbIcon&&t.getIcon(c)?(d(),I(u,{key:0,icon:t.getIcon(c)},null,8,["icon"])):G("",!0),t.hasRedirect(h,c)?(d(),I(b,{key:2,to:"",onClick:e=>t.handleClick(c,a,e)},{default:B(()=>[H(M(t.t(c.name||c.meta.title)),1)]),_:2},1032,["onClick"])):(d(),C("span",F,M(t.t(c.name||c.meta.title)),1))]),_:1},8,["routes"])],2)}var W=R(Z,[["render",K]]);export{W as default};
